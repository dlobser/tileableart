<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/addons/p5.sound.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
    <style>
    html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}
</style>
  </head>
  <body>
    <script>

	var img;

	function preload() {
	  img = loadImage("eyeParts.png");
	  // img.tint(255,0,0);
	}

	function setup() {
	  createCanvas(600, 600);
	   // 1. Background image
	  
	}

	function draw() {
		eyeTunnel();
	}

	function eyeGrid(){
		background(230);
		let count = 10 ;
		for(var i = 0 ; i <count ; i ++){
			for(var j = 0 ; j <count ; j++){
				let x = (i/count)*width;
				let y = (j/count)*height;
				if(j%2==0)
					x+=(1/count)*width*.5;
				if(j%2==0&&i==count-1)
					continue;
				eye(x+((1/count)*width)*.5, y+((1/count)*width)*.5,sin(frameCount*.05+i*.2+j*.2)*50,sin(frameCount*.04+j)*20,.3,i+sin(i+j+frameCount*.03));
			}
		}
	}
	function eyeTunnel(){
		background(230);
		let count = 150;
	 translate(width/2,height/2);
	 let X = mouseX;
	 let Y = mouseY*.1+10;
	 for(let i = 0 ; i < count ;i++){
	 	var x = sin((i/count)*PI*2*X*.1)*(i+10)*Y*.1;
	 	var y = cos((i/count)*PI*2*X*.1)*(i+10)*Y*.1;
	 	eye(x, y,sin(frameCount*.1+i)*50,sin(frameCount*.12)*20,(i*.03+1)*.1,i);
	 }
	  eye(0,0,sin(frameCount*.1)*50,sin(frameCount*.12)*20,.3,0);

	}
	function eye(x,y, ex,ey,sc,r){
	  push();
	  

	  translate(x,y);
	  scale(sc);
	  	  rotate(r);
 	  ellipseMode(CORNER);
	  ellipse(75-150,75-150,150,150);
	  push();
	  translate(ex,ey);
	  image(img, 80-150, 80-150, 150, 150, 350, 1000, 540, 540);
	  push();
	  // tint(100, 255, 204);
	  blendMode(MULTIPLY);
	  // noStroke();
	  // fill(255,0,0);
	  // ellipse(102-150,80-150,100,100,10);
	  image(img, 102-150, 80-150, 150, 150, 855, 1000, 540, 540);
	  // noTint();
	  pop();
	  image(img, 65-150, 80-150, 150, 150, 0, 1000, 350, 540);
	  pop();
  	  image(img, -150, -150, 300, 300, 0, 0, img.width, img.width*.86);
  	  pop();
	}
    </script>
  </body>
</html>
